/**
 * OfferView styles - Inscryption-style offer presentation
 *
 * Animation timings:
 * - Enter: 400ms total (anticipation → tray slide → card stagger → settle)
 * - Exit: 300ms total (faster, snappier return)
 */

/* ============================================================================
   Responsive card sizing
   ============================================================================ */

:root {
  /* Offer card sizing - scales with viewport height for readability on all displays */
  /* Min 280px (small screens), prefer 45vh, max 600px (huge screens) */
  --offer-card-height: clamp(280px, 45vh, 600px);
  --offer-card-width: calc(var(--offer-card-height) * 0.714); /* Card aspect ratio */
}

/* ============================================================================
   Main container
   ============================================================================ */

.offer-view {
  position: fixed;
  inset: 0;
  z-index: 100;
  pointer-events: none;
}

.offer-view > * {
  pointer-events: auto;
}

/* ============================================================================
   Dark overlay
   ============================================================================ */

.offer-view__overlay {
  position: absolute;
  inset: 0;
  background: rgba(15, 12, 10, 0);
  transition: background 350ms ease-out;
  pointer-events: auto;
}

.offer-view__overlay--entering {
  background: rgba(15, 12, 10, 0);
  animation: overlay-fade-in 350ms ease-out forwards;
}

.offer-view__overlay--visible {
  background: rgba(15, 12, 10, 0.9);
}

.offer-view__overlay--exiting {
  animation: overlay-fade-out 250ms ease-in forwards;
}

@keyframes overlay-fade-in {
  from {
    background: rgba(15, 12, 10, 0);
  }
  to {
    background: rgba(15, 12, 10, 0.9);
  }
}

@keyframes overlay-fade-out {
  from {
    background: rgba(15, 12, 10, 0.9);
  }
  to {
    background: rgba(15, 12, 10, 0);
  }
}

/* ============================================================================
   Tray container
   ============================================================================ */

.offer-view__tray-container {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%) translateY(-100%);
  width: 90%;
  max-width: 1200px;
  padding: 2rem 2rem 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}

/* Enter animation - slides in from top with overshoot */
.offer-view__tray-container--entering {
  animation: tray-slide-in 350ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  animation-delay: 80ms; /* Anticipation delay */
}

.offer-view__tray-container--visible {
  transform: translateX(-50%) translateY(0);
}

/* Exit animation - slides out upward, accelerates */
.offer-view__tray-container--exiting {
  animation: tray-slide-out 250ms cubic-bezier(0.36, 0, 0.66, -0.56) forwards;
}

@keyframes tray-slide-in {
  from {
    transform: translateX(-50%) translateY(-100%);
  }
  to {
    transform: translateX(-50%) translateY(0);
  }
}

@keyframes tray-slide-out {
  from {
    transform: translateX(-50%) translateY(0);
  }
  to {
    transform: translateX(-50%) translateY(-100%);
  }
}

/* ============================================================================
   Pane indicator (reuses .carousel-pane-indicator from FloatingHand.css)
   ============================================================================ */

/* Override positioning for offer view context - relative instead of fixed */
.carousel-pane-indicator--offer {
  position: relative;
  bottom: auto;
  left: auto;
  transform: none;
}

/* ============================================================================
   Navigation hint
   ============================================================================ */

.offer-view__nav-hint {
  display: flex;
  gap: 2rem;
  color: #555;
  font-size: 0.75rem;
  padding-top: 0.5rem;
}

.offer-view__nav-hint span {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

/* ============================================================================
   Offer Tray (the wooden tray that holds cards)
   ============================================================================ */

.offer-tray {
  position: relative;
  background: linear-gradient(135deg, #2a2520 0%, #1a1815 100%);
  border: 3px solid #3d3530;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.5),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  width: 100%;
  min-height: 200px;
  /* Allow cards to extend beyond tray on hover */
  overflow: visible;
}

/* Tray shadow beneath */
.offer-tray::after {
  content: "";
  position: absolute;
  bottom: -20px;
  left: 10%;
  right: 10%;
  height: 20px;
  background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.4) 0%, transparent 70%);
  pointer-events: none;
}

/* ============================================================================
   Offer Card (individual card in the tray)
   ============================================================================ */

.offer-card {
  --hover-rotation: 0deg;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  /* Cards are straight by default */
  transform: rotate(0deg);
  transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
}

/* Hover: slight tilt and lift for organic feel */
.offer-card:hover {
  transform: rotate(var(--hover-rotation)) translateY(-15px) scale(1.05);
  z-index: 10;
}

.offer-card--not-acquirable:hover {
  transform: rotate(var(--hover-rotation)) translateY(-8px);
}

/* Card content wrapper */
.offer-card__content {
  position: relative;
  background: #0f0f23;
  border-radius: 8px;
  overflow: hidden;
  transition: box-shadow 0.2s ease-out;
}

/* Glow effect on hover (acquirable cards) */
.offer-card:hover .offer-card__content {
  box-shadow: 0 0 20px rgba(52, 152, 219, 0.4);
}

.offer-card--not-acquirable:hover .offer-card__content {
  box-shadow: none;
  filter: saturate(0.7);
}

/* Stagger animation for cards entering */
.offer-card--animate-enter {
  animation: card-stagger-in 200ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  opacity: 0;
}

@keyframes card-stagger-in {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ============================================================================
   Card type-specific borders
   ============================================================================ */

.offer-card--unit .offer-card__content {
  border: 2px solid #7f8c8d;
}

.offer-card--unit.offer-card--elite .offer-card__content {
  border-color: #f39c12;
}

.offer-card--spell .offer-card__content {
  border: 2px solid #9b59b6;
}

.offer-card--aa .offer-card__content {
  border: 2px solid #e67e22;
}

/* ============================================================================
   Acquire button
   ============================================================================ */

.offer-card__acquire-btn {
  position: absolute;
  bottom: 8px;
  left: 8px;
  right: 8px;
  padding: 6px 12px;
  border: none;
  border-radius: 4px;
  background: rgba(39, 174, 96, 0.9);
  color: #fff;
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
  opacity: 0;
  transform: translateY(5px);
}

.offer-card:hover .offer-card__acquire-btn {
  opacity: 1;
  transform: translateY(0);
}

.offer-card__acquire-btn:hover {
  background: rgba(46, 204, 113, 0.95);
}

.offer-card__acquire-btn--disabled {
  background: rgba(85, 85, 85, 0.9);
  color: #aaa;
  cursor: not-allowed;
}

.offer-card__acquire-btn--disabled:hover {
  background: rgba(85, 85, 85, 0.9);
}

/* ============================================================================
   Unit Card specific
   ============================================================================ */

.offer-card__unit-image,
.offer-card__spell-image,
.offer-card__aa-image {
  display: block;
  border-radius: 6px;
}

.offer-card__unit-fallback {
  padding: 1rem;
  min-height: 120px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  text-align: center;
}

.offer-card__unit-name {
  font-weight: 600;
  font-size: 0.9rem;
  color: #eee;
}

.offer-card__unit-stats {
  font-size: 0.75rem;
  color: #888;
  margin-top: 0.25rem;
}

.offer-card__cost {
  position: absolute;
  top: 6px;
  right: 6px;
  background: rgba(52, 152, 219, 0.9);
  color: #fff;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 600;
  z-index: 1;
}

/* ============================================================================
   Spell/AA Card specific
   ============================================================================ */

.offer-card__card-name {
  padding: 1rem 1.5rem;
  text-align: center;
  min-width: 140px;
}

.offer-card__spell-name {
  font-weight: 600;
  font-size: 0.9rem;
  color: #bb8fce;
}

.offer-card__aa-name {
  font-weight: 600;
  font-size: 0.9rem;
  color: #f5b041;
}

/* ============================================================================
   Offer pane content layouts
   ============================================================================ */

.offer-pane {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1.5rem;
  width: 100%;
  /* Padding to give cards room for hover rotation/lift without clipping */
  padding: 1rem 1rem 2rem;
}

.offer-pane__empty {
  color: #666;
  font-size: 0.9rem;
  padding: 2rem;
  text-align: center;
  width: 100%;
}

.offer-pane__deck-info {
  width: 100%;
  font-size: 0.75rem;
  color: #555;
  text-align: center;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  margin-top: 0.5rem;
}

/* ============================================================================
   Carousel transition (pane switching)
   ============================================================================ */

.offer-tray__content {
  position: relative;
  /* Allow rotated cards to extend beyond bounds without clipping */
  overflow: visible;
}

.offer-tray__pane {
  width: 100%;
}

.offer-tray__pane--exiting {
  animation: pane-exit-left 350ms ease-in-out forwards;
  position: absolute;
  top: 0;
  left: 0;
}

.offer-tray__pane--entering {
  animation: pane-enter-right 350ms ease-in-out forwards;
}

@keyframes pane-exit-left {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(-100%);
    opacity: 0;
  }
}

@keyframes pane-enter-right {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* ============================================================================
   Responsive adjustments
   ============================================================================ */

@media (max-width: 768px) {
  .offer-view__tray-container {
    width: 95%;
    padding: 1rem 1rem 0.5rem;
  }

  .offer-tray {
    padding: 1rem;
  }

  .offer-pane {
    gap: 0.75rem;
  }

  .offer-card__card-name {
    padding: 0.75rem 1rem;
    min-width: 100px;
  }
}

@media (min-width: 1400px) {
  .offer-view__tray-container {
    max-width: 1400px;
  }
}

/* ============================================================================
   AA Pane sections
   ============================================================================ */

.offer-pane--aa {
  flex-direction: column;
  gap: 1.5rem;
}

.offer-pane__section {
  width: 100%;
}

.offer-pane__section-title {
  font-size: 0.8rem;
  font-weight: 600;
  color: #888;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 0.75rem;
  padding-left: 0.25rem;
}

.offer-pane__cards {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
}

/* ============================================================================
   Notice banner (for pending rewards)
   ============================================================================ */

.offer-pane__notice {
  width: 100%;
  background: rgba(46, 204, 113, 0.2);
  border: 1px solid rgba(46, 204, 113, 0.5);
  border-radius: 6px;
  padding: 0.75rem 1rem;
  color: #2ecc71;
  font-weight: 500;
  text-align: center;
  margin-bottom: 0.5rem;
}
