/* ============================================
   Tile Reveal Animation System

   Disney principles applied:
   - Anticipation: ghost hex pulses before reveal
   - Squash & Stretch: tile overshoots then settles
   - Follow-through: enemies/sites appear with delay
   - Secondary action: particles and glow effects
   - Timing: 800ms total, feels momentous
   ============================================ */

/* Phase 1: Ghost hex anticipation - pulses before disappearing */
@keyframes ghost-hex-anticipation {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  30% {
    opacity: 1;
    transform: scale(1.1);
    filter: brightness(1.4);
  }
  100% {
    opacity: 0;
    transform: scale(0.8);
    filter: brightness(2);
  }
}

/* Phase 2: Tile reveal - emerges from darkness with overshoot */
@keyframes tile-reveal {
  0% {
    opacity: 0;
    transform: scale(0.7);
    filter: blur(8px) brightness(0.3);
  }
  20% {
    opacity: 0.3;
    filter: blur(6px) brightness(0.5);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.06);
    filter: blur(2px) brightness(1.3);
  }
  70% {
    opacity: 1;
    transform: scale(0.98);
    filter: blur(0) brightness(1.1);
  }
  100% {
    opacity: 1;
    transform: scale(1);
    filter: blur(0) brightness(1);
  }
}

/* Phase 3: Light bloom effect - radial glow from center */
@keyframes tile-bloom {
  0% {
    opacity: 0;
    transform: scale(0.3);
  }
  30% {
    opacity: 0.8;
  }
  100% {
    opacity: 0;
    transform: scale(2.5);
  }
}

/* Phase 4: Hex content fade-in - terrain overlays appear with stagger */
@keyframes hex-content-reveal {
  0% {
    opacity: 0;
    transform: translateY(8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Phase 5: Enemy token pop-in - bouncy entrance for each enemy (during exploration) */
@keyframes enemy-token-reveal {
  0% {
    opacity: 0;
    transform: scale(0) rotate(-20deg);
  }
  50% {
    opacity: 1;
    transform: scale(1.2) rotate(5deg);
  }
  70% {
    transform: scale(0.9) rotate(-3deg);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

/* Game intro: Enemy token 3D flip - like a poker chip being tossed onto the table */
@keyframes enemy-token-flip {
  0% {
    opacity: 0;
    transform: perspective(400px) rotateX(-90deg) translateY(-30px) scale(0.6);
  }
  40% {
    opacity: 1;
    transform: perspective(400px) rotateX(15deg) translateY(5px) scale(1.1);
  }
  60% {
    transform: perspective(400px) rotateX(-8deg) translateY(-2px) scale(0.95);
  }
  80% {
    transform: perspective(400px) rotateX(4deg) translateY(1px) scale(1.02);
  }
  100% {
    opacity: 1;
    transform: perspective(400px) rotateX(0deg) translateY(0) scale(1);
  }
}

/* Game intro: Tile cascade - tiles slide in from slightly above with scale */
@keyframes tile-cascade {
  0% {
    opacity: 0;
    transform: scale(0.85) translateY(-20px);
    filter: blur(4px) brightness(0.5);
  }
  60% {
    opacity: 1;
    transform: scale(1.03) translateY(3px);
    filter: blur(0) brightness(1.1);
  }
  80% {
    transform: scale(0.98) translateY(-1px);
    filter: blur(0) brightness(1.02);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0) brightness(1);
  }
}

/* Phase 6: Site icon emergence - special treatment for sites */
@keyframes site-reveal {
  0% {
    opacity: 0;
    transform: scale(0.5) translateY(10px);
    filter: brightness(2) saturate(0);
  }
  60% {
    opacity: 1;
    transform: scale(1.15) translateY(-3px);
    filter: brightness(1.3) saturate(1);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: brightness(1) saturate(1);
  }
}

/* Reveal particles - sparkles that emanate from center */
@keyframes reveal-particle {
  0% {
    opacity: 1;
    transform: translate(0, 0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(var(--particle-x, 50px), var(--particle-y, -30px)) scale(0.3);
  }
}

/* Shimmer effect on newly revealed tile */
@keyframes tile-shimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

/* Ghost hex hover pulse (always active, not just during reveal) */
@keyframes ghost-hex-pulse {
  0%, 100% {
    opacity: 0.2;
    filter: brightness(1);
  }
  50% {
    opacity: 0.35;
    filter: brightness(1.2);
  }
}
